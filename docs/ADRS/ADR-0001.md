# ADR-0001: Cloudflare Worker Licensing Stack

- Status: Accepted
- Date: 2024-06-01

## Context

We need a globally available licensing service that can validate device entitlements, handle subscription billing, and remain lightweight enough for rapid iteration.

## Decision

Use a Cloudflare Worker backed by Workers KV to serve licensing APIs, integrate Stripe for billing and webhooks, and sign entitlements with Ed25519 keys shared across runtimes.

## Consequences

- The worker becomes the source of truth for license state; desktop and Python services must defer to it before executing privileged actions.
- Stripe events must be consumed and translated into KV updates to keep entitlement data current.
- Key management tooling is required to rotate Ed25519 keys across the worker and Python services.
